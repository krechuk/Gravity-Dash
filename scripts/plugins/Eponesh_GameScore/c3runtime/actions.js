function stoarr(e="",t=String){return String(e).split(",").map(e=>t(e.trim())).filter(e=>e)}globalThis.C3.Plugins.Eponesh_GameScore.Acts={PlayerSetName(e){this.gp.player.name=e},PlayerSetAvatar(e){this.gp.player.avatar=e},PlayerSetScore(e){this.gp.player.score=e},PlayerAddScore(e){this.gp.player.score+=e},PlayerSet(e,t){this.gp.player.set(e,t)},PlayerSetFlag(e,t){this.gp.player.set(e,!t)},PlayerAdd(e,t){this.gp.player.add(e,t)},PlayerToggle(e){this.gp.player.toggle(e)},PlayerReset(){this.gp.player.reset()},PlayerRemove(){this.gp.player.remove()},PlayerSync(e=!1,t){return this.gp.player.sync({override:e,storage:this.mappers.syncStorage[t]})},PlayerEnableAutoSync(e,t=!1,r){return this.gp.player.enableAutoSync({interval:e,override:t,storage:this.mappers.syncStorage[r]})},PlayerDisableAutoSync(e){return this.gp.player.disableAutoSync({storage:this.mappers.syncStorage[e]})},PlayerLoad(){return this.gp.player.load()},PlayerLogin(){return this.gp.player.login()},PlayerLogout(){return this.gp.player.logout()},PlayerFetchFields(){return this.gp.player.fetchFields()},PlayerWaitForReady(){return this.awaiters.player.ready},LeaderboardOpen(e,t,r,s,i,a,h){return this.gp.leaderboard.open({id:this.gp.player.id,orderBy:stoarr(e),order:0===t?"DESC":"ASC",limit:r,showNearest:h,withMe:this.mappers.withMe[s],includeFields:stoarr(i),displayFields:stoarr(a)}).catch(e=>{this.handleResult(!1,e)})},LeaderboardFetch(t,e,r,s,i,a,h){return this.gp.leaderboard.fetch({id:this.gp.player.id,orderBy:stoarr(e),order:0===r?"DESC":"ASC",limit:s,showNearest:h,withMe:this.mappers.withMe[i],includeFields:stoarr(a)}).then(e=>{this.lastLeaderboardTag=t,this.lastLeaderboardVariant="default",this.leaderboardInfo=e.leaderboard,this.leaderboard=e.players,this.leaderboardResult=e,this.handleResult(!0),this._trigger(this.conditions.OnLeaderboardFetch),this._trigger(this.conditions.OnLeaderboardAnyFetch)}).catch(e=>{this.handleResult(!1,e),this.lastLeaderboardTag=t,this.lastLeaderboardVariant="default",this._trigger(this.conditions.OnLeaderboardFetchError),this._trigger(this.conditions.OnLeaderboardAnyFetchError)})},LeaderboardFetchPlayerRating(t,e,r,s,i){return this.gp.leaderboard.fetchPlayerRating({showNearest:s,id:this.gp.player.id,orderBy:stoarr(e),includeFields:stoarr(i),order:0===r?"DESC":"ASC"}).then(e=>{this.lastLeaderboardTag=t,this.lastLeaderboardVariant="default",this.lastLeaderboardPlayerRatingTag=t,this.currentLeaderboardPlayer=Object.assign(this.gp.player.toJSON(),e.player),this.leaderboardPlayerPosition=e.player.position,(this.leaderboardResult=e).topPlayers=[],this.handleResult(!0),this._trigger(this.conditions.OnLeaderboardFetchPlayer),this._trigger(this.conditions.OnLeaderboardAnyFetchPlayer)}).catch(e=>{this.handleResult(!1,e),this.lastLeaderboardTag=t,this.lastLeaderboardVariant="default",this.lastLeaderboardPlayerRatingTag=t,this._trigger(this.conditions.OnLeaderboardFetchPlayerError),this._trigger(this.conditions.OnLeaderboardAnyFetchPlayerError)})},LeaderboardOpenScoped(e,t,r,s,i,a,h,n){e={id:parseInt(e,10)||0,tag:e,variant:t,limit:s,showNearest:n,order:this.mappers.order[r],withMe:this.mappers.withMe[i],includeFields:stoarr(a),displayFields:stoarr(h)};return this.gp.leaderboard.openScoped(e).catch(console.warn)},LeaderboardFetchScoped(t,r,e,s,i,a,h){s={id:parseInt(t,10)||0,tag:t,variant:r,limit:s,showNearest:h,order:this.mappers.order[e],withMe:this.mappers.withMe[i],includeFields:stoarr(a)};return this.gp.leaderboard.fetchScoped(s).then(e=>{this.lastLeaderboardTag=t,this.lastLeaderboardVariant=r,this.leaderboardInfo=e.leaderboard,this.leaderboard=e.players,this.leaderboardResult=e,this.handleResult(!0),this._trigger(this.conditions.OnLeaderboardFetch),this._trigger(this.conditions.OnLeaderboardAnyFetch)}).catch(e=>{this.handleResult(!1,e),this.lastLeaderboardTag=t,this.lastLeaderboardVariant=r,this._trigger(this.conditions.OnLeaderboardFetchError),this._trigger(this.conditions.OnLeaderboardAnyFetchError)})},LeaderboardFetchPlayerRatingScoped(t,r,e,s,i){s={id:parseInt(t,10)||0,tag:t,variant:r,showNearest:s,order:this.mappers.order[e],includeFields:stoarr(i)};return this.gp.leaderboard.fetchPlayerRatingScoped(s).then(e=>{this.lastLeaderboardPlayerRatingTag=t,this.lastLeaderboardTag=t,this.lastLeaderboardVariant=r,this.currentLeaderboardPlayer=Object.assign(this.gp.player.toJSON(),e.player),this.leaderboardPlayerPosition=e.player.position,(this.leaderboardResult=e).topPlayers=[],this.handleResult(!0),this._trigger(this.conditions.OnLeaderboardFetchPlayer),this._trigger(this.conditions.OnLeaderboardAnyFetchPlayer)}).catch(e=>{this.handleResult(!1,e),this.lastLeaderboardPlayerRatingTag=t,this.lastLeaderboardTag=t,this.lastLeaderboardVariant=r,this._trigger(this.conditions.OnLeaderboardFetchPlayerError),this._trigger(this.conditions.OnLeaderboardAnyFetchPlayerError)})},LeaderboardPublishRecord(t,r,e){var s=this.leaderboardRecords[t],s=s?s[r]:null,i=parseInt(t,10)||0;return this.gp.leaderboard.publishRecord({id:i,tag:t,variant:r,override:e,record:s}).then(e=>{this.lastLeaderboardTag=t,this.lastLeaderboardVariant=r,this.lastLeaderboardPlayerRatingTag=t,this.leaderboardRecords[t]||(this.leaderboardRecords[t]={}),this.leaderboardRecords[t][r]=e.record,this.handleResult(!0),this._trigger(this.conditions.OnLeaderboardPublishRecord)}).catch(e=>{this.handleResult(!1,e),this.lastLeaderboardTag=t,this.lastLeaderboardVariant=r,this.lastLeaderboardPlayerRatingTag=t,this._trigger(this.conditions.OnLeaderboardPublishRecordError)})},LeaderboardSetRecord(e,t,r,s){this.leaderboardRecords[e]||(this.leaderboardRecords[e]={}),this.leaderboardRecords[e][t]||(this.leaderboardRecords[e][t]={}),this.leaderboardRecords[e][t][r]=s},AchievementsOpen(){return this.gp.achievements.open().catch(console.warn)},AchievementsFetch(){return this.gp.achievements.fetch().then(e=>{this.achievements=e.achievements,this.achievementsGroups=e.achievementsGroups,this.playerAchievements=e.playerAchievements,this.handleResult(!0),this._trigger(this.conditions.OnAchievementsFetch)}).catch(e=>{this.handleResult(!1,e),this._trigger(this.conditions.OnAchievementsFetchError)})},AchievementsUnlock(e){return this.gp.achievements.unlock(this.getIdOrTag(e))},AchievementsSetProgress(e,t){const r=this.getIdOrTag(e);return r.progress=Number(t),this.gp.achievements.setProgress(r)},PaymentsFetchProducts(){return this.gp.payments.fetchProducts().then(e=>{this.products=e.products,this.playerPurchases=e.playerPurchases,this.handleResult(!0),this._trigger(this.conditions.OnPaymentsFetchProducts)}).catch(e=>{this.handleResult(!1,e),this._trigger(this.conditions.OnPaymentsFetchProductsError)})},PaymentsPurchase(e){return this.gp.payments.purchase(this.getIdOrTag(e))},PaymentsConsume(e){var t=parseInt(e,10)||0;return this.gp.payments.consume(0<t?{id:t}:{tag:e}).then(e=>{this.isConsumeProductSuccess=e.success,this.consumeProductError=e.error||"",this.handleResult(e.success,e.error);var t=e.product||{};if(this.consumedProductId=t.id||0,this.consumedProductTag=t.tag||"",e.success)return this._trigger(this.conditions.OnPaymentsConsume),void this._trigger(this.conditions.OnPaymentsAnyConsume);this._trigger(this.conditions.OnPaymentsConsumeError),this._trigger(this.conditions.OnPaymentsAnyConsumeError)}).catch(e=>{this.isConsumeProductSuccess=!1,this.consumeProductError=this.etos(e),this.handleResult(!1,e),this._trigger(this.conditions.OnPaymentsConsumeError),this._trigger(this.conditions.OnPaymentsAnyConsumeError)})},PaymentsSubscribe(e){return this.gp.payments.subscribe(this.getIdOrTag(e))},PaymentsUnsubscribe(e){var t=parseInt(e,10)||0;return this.gp.payments.unsubscribe(0<t?{id:t}:{tag:e}).then(e=>{this.isUnsubscribeProductSuccess=e.success,this.handleResult(e.success,e.error);var t=e.product||{},r=e.purchase||{};if(this.currentPurchase=r,this.currentProduct=t,this.currentProductPurchases=1,this.purchasedProductId=t.id||0,this.purchasedProductTag=t.tag||"",e.success)return this._trigger(this.conditions.OnPaymentsUnsubscribe),void this._trigger(this.conditions.OnPaymentsAnyUnsubscribe);this._trigger(this.conditions.OnPaymentsUnsubscribeError),this._trigger(this.conditions.OnPaymentsAnyUnsubscribeError)}).catch(e=>{this.isUnsubscribeProductSuccess=!1,this.handleResult(!1,e),this._trigger(this.conditions.OnPaymentsUnsubscribeError),this._trigger(this.conditions.OnPaymentsAnySubscribeError)})},ImagesFetch(e,t,r,s){return this.gp.images.fetch({playerId:t,limit:r,offset:s,tags:stoarr(e)}).then(e=>{this.images=e.items,this.canLoadMoreImages=e.canLoadMore,this.handleResult(!0),this._trigger(this.conditions.OnImagesFetch)}).catch(e=>{this.handleResult(!1,e),this._trigger(this.conditions.OnImagesFetchError)})},ImagesFetchMore(e,t,r){return this.gp.images.fetchMore({playerId:t,limit:r,tags:stoarr(e)}).then(e=>{this.images=e.items,this.canLoadMoreImages=e.canLoadMore,this.handleResult(!0),this._trigger(this.conditions.OnImagesFetchMore)}).catch(e=>{this.handleResult(!1,e),this._trigger(this.conditions.OnImagesFetchMoreError)})},ImagesUpload(e){return this.gp.images.upload({tags:stoarr(e)}).then(e=>{this.currentImage=e||{},this.handleResult(!0),this._trigger(this.conditions.OnImagesUpload)}).catch(e=>{this.handleResult(!1,e),this._trigger(this.conditions.OnImagesUploadError)})},ImagesUploadUrl(e,t){return this.gp.images.uploadUrl({url:e,tags:stoarr(t)}).then(e=>{this.currentImage=e||{},this.handleResult(!0),this._trigger(this.conditions.OnImagesUpload)}).catch(e=>{this.handleResult(!1,e),this._trigger(this.conditions.OnImagesUploadError)})},ImagesChooseFile(){return this.gp.images.chooseFile().then(e=>{this.lastImageTempUrl=e.tempUrl,this.handleResult(!0),this._trigger(this.conditions.OnImagesChoose)}).catch(e=>{this.handleResult(!1,e),this.lastImageTempUrl="",this.isLastActionSuccess=!1,this._trigger(this.conditions.OnImagesChooseError)})},FilesFetch(e,t,r,s){return this.gp.files.fetch({playerId:t,limit:r,offset:s,tags:stoarr(e)}).then(e=>{this.files=e.items,this.canLoadMoreFiles=e.canLoadMore,this.handleResult(!0),this._trigger(this.conditions.OnFilesFetch)}).catch(e=>{this.handleResult(!1,e),this._trigger(this.conditions.OnFilesFetchError)})},FilesFetchMore(e,t,r){return this.gp.files.fetchMore({playerId:t,limit:r,tags:stoarr(e)}).then(e=>{this.files=e.items,this.canLoadMoreFiles=e.canLoadMore,this.handleResult(!0),this._trigger(this.conditions.OnFilesFetchMore)}).catch(e=>{this.handleResult(!1,e),this._trigger(this.conditions.OnFilesFetchMoreError)})},FilesUpload(e){return this.gp.files.upload({tags:stoarr(e)}).then(e=>{this.currentFile=e||{},this.handleResult(!0),this._trigger(this.conditions.OnFilesUpload)}).catch(e=>{this.handleResult(!1,e),this._trigger(this.conditions.OnFilesUploadError)})},FilesUploadUrl(e,t,r){return this.gp.files.uploadUrl({url:e,filename:t,tags:stoarr(r)}).then(e=>{this.currentFile=e||{},this.handleResult(!0),this._trigger(this.conditions.OnFilesUpload)}).catch(e=>{this.handleResult(!1,e),this._trigger(this.conditions.OnFilesUploadError)})},FilesUploadContent(e,t,r){return this.gp.files.uploadContent({content:e,filename:t,tags:stoarr(r)}).then(e=>{this.currentFile=e||{},this.handleResult(!0),this._trigger(this.conditions.OnFilesUpload)}).catch(e=>{this.handleResult(!1,e),this._trigger(this.conditions.OnFilesUploadError)})},FilesLoadContent(e){return this.gp.files.loadContent(e).then(e=>{this.lastFileContent=e,this.handleResult(!0),this._trigger(this.conditions.OnFilesLoadContent)}).catch(e=>{this.lastFileContent="",this.handleResult(!1,e),this._trigger(this.conditions.OnFilesLoadContentError)})},FilesChooseFile(e){return this.gp.files.chooseFile(e).then(e=>{this.lastFileTempUrl=e.tempUrl,this.handleResult(!0),this._trigger(this.conditions.OnFilesChoose)}).catch(e=>{this.handleResult(!1,e),this.lastFileTempUrl="",this.isLastActionSuccess=!1,this._trigger(this.conditions.OnFilesChooseError)})},VariablesFetch(){return this.gp.variables.fetch().then(()=>{this.handleResult(!0),this._trigger(this.conditions.OnVariablesFetch)}).catch(e=>{this.handleResult(!1,e),this._trigger(this.conditions.OnVariablesFetchError)})},PlatformVariablesFetch(e=""){e=e.split(",").reduce((e,t)=>{const[r,s]=t.split("=");return r&&s&&(e[r.trim()]=s.trim()),e},{});return this.gp.variables.fetchPlatformVariables({clientParams:e}).then(e=>{this.handleResult(!0),this.platformVariables=e,this._trigger(this.conditions.OnPlatformVariablesFetch)}).catch(e=>{this.handleResult(!1,e),this._trigger(this.conditions.OnPlatformVariablesFetchError)})},FullscreenOpen(){return this.gp.fullscreen.open()},FullscreenClose(){return this.gp.fullscreen.close()},FullscreenToggle(){return this.gp.fullscreen.toggle()},AdsShowFullscreen(e=!1){return this.gp.ads.showFullscreen({showCountdownOverlay:e})},AdsShowRewarded(e=!1,t=""){return this.lastRewardedTag=t,this.gp.ads.showRewardedVideo({showRewardedFailedOverlay:e})},AdsShowPreloader(){return this.gp.ads.showPreloader()},AdsShowSticky(){return this.gp.ads.showSticky()},AdsCloseSticky(){return this.gp.ads.closeSticky()},AdsRefreshSticky(){return this.gp.ads.refreshSticky()},AnalyticsHit(e){return this.gp.analytics.hit(e)},AnalyticsGoal(e,t){return this.gp.analytics.goal(e,t)},SocialsShare(e,t,r){return this.gp.socials.share({text:e,url:t,image:r})},SocialsPost(e,t,r){return this.gp.socials.post({text:e,url:t,image:r})},SocialsInvite(e,t,r){return this.gp.socials.invite({text:e,url:t,image:r})},SocialsJoinCommunity(){return this.gp.socials.joinCommunity()},UniquesRegister(e,t){return this.gp.uniques.register({tag:e,value:t})},UniquesCheck(e,t){return this.gp.uniques.check({tag:e,value:t})},UniquesDelete(e){return this.gp.uniques.delete({tag:e})},StorageGet(e){return this.gp.storage.get(e)},StorageSet(e,t){return this.gp.storage.set(e,t)},StorageGetGlobal(e){return this.gp.storage.getGlobal(e)},StorageSetGlobal(e,t){return this.gp.storage.setGlobal(e,t)},StorageSetStorage(e){return this.gp.storage.setStorage(this.mappers.storageType[e])},GamesCollectionsOpen(e){var t=parseInt(e,10)||0;return this.gp.gamesCollections.open(0<t?{id:t}:{tag:e||"ANY"})},GamesCollectionsFetch(t){var e=parseInt(t,10)||0;return this.gp.gamesCollections.fetch(0<e?{id:e}:{tag:t}).then(e=>{this.lastGamesCollectionIdOrTag=t,this.gamesCollection=e,this._trigger(this.conditions.OnGamesCollectionsFetch),this._trigger(this.conditions.OnGamesCollectionsFetchAny)}).catch(e=>{this.handleResult(!1,e),this.lastGamesCollectionIdOrTag=t,this.gamesCollectionFetchError=e&&e.message||"",this._trigger(this.conditions.OnGamesCollectionsFetchError),this._trigger(this.conditions.OnGamesCollectionsFetchAnyError)})},DocumentsOpen(e){e=this.mappers.documentTypes[e];return this.gp.documents.open({type:e})},DocumentsFetch(e,t){const r=this.mappers.documentTypes[e];e=this.mappers.documentFormat[t];return this.gp.documents.fetch({type:r,format:e}).then(e=>{this.lastDocumentType=r,this.document=e,this._trigger(this.conditions.OnDocumentsFetch),this._trigger(this.conditions.OnDocumentsFetchAny)}).catch(e=>{this.handleResult(!1,e),this.documentFetchError=this.etos(e),this.lastDocumentType=r,this._trigger(this.conditions.OnDocumentsFetchError),this._trigger(this.conditions.OnDocumentsFetchAnyError)})},PlayersFetch(t,e){return this.gp.players.fetch({ids:stoarr(e,Number)}).then(e=>{this.lastPlayersTag=t,this.playersList=e.players,this.handleResult(!0),this._trigger(this.conditions.OnPlayersFetch),this._trigger(this.conditions.OnPlayersAnyFetch)}).catch(e=>{this.lastPlayersTag=t,this.handleResult(!1,e),this._trigger(this.conditions.OnPlayersFetchError),this._trigger(this.conditions.OnPlayersAnyFetchError)})},PlayersFetchOne(t,e){return this.gp.players.fetch({ids:[Number(e)]}).then(e=>{this.lastPlayersTag=t,e.players[0]?(this.playersList=e.players,this.currentPlayersIndex=0,this.currentPlayersPlayer=e.players[0],this.handleResult(!0),this._trigger(this.conditions.OnPlayersFetch),this._trigger(this.conditions.OnPlayersAnyFetch)):(this.handleResult(!1,new Error("player_not_found")),this._trigger(this.conditions.OnPlayersFetchError),this._trigger(this.conditions.OnPlayersAnyFetchError))}).catch(e=>{this.lastPlayersTag=t,this.handleResult(!1,e),this._trigger(this.conditions.OnPlayersFetchError),this._trigger(this.conditions.OnPlayersAnyFetchError)})},AppAddShortcut(){return this.gp.app.addShortcut()},AppRequestReview(){return this.gp.app.requestReview()},ChangeLanguage(e){return this.gp.changeLanguage(this.mappers.language[e])},ChangeLanguageByCode(e=""){return this.gp.changeLanguage(e.toLowerCase())},ChangeAvatarGenerator(e){return this.gp.changeAvatarGenerator(this.mappers.avatarGenerator[e])},SetBackground(e,t,r){return this.gp.setBackground({url:e,blur:t,fade:r})},LoadOverlay(){return this.gp.loadOverlay()},Pause(){return this.gp.pause()},Resume(){return this.gp.resume()},GameStart(){return this.gp.gameStart()},GameplayStart(){return this.gp.gameplayStart()},GameplayStop(){return this.gp.gameplayStop()},SocialsAddShareUrlParam(e,t){this.shareParams[e]=t},SocialsResetShareParams(){this.shareParams={}},RewardsAccept(e){return this.gp.rewards.accept(this.getIdOrTag(e))},RewardsGive(e,t){const r=this.getIdOrTag(e);return r.lazy=!!t,this.gp.rewards.give(r)},TriggersClaim(e){return this.gp.triggers.claim({id:e,tag:e})},SchedulersRegister(e){return this.gp.schedulers.register(this.getIdOrTag(e))},SchedulersClaimDay(e,t){return this.gp.schedulers.claimDay(e,t)},SchedulersClaimDayAdditional(e,t,r){return this.gp.schedulers.claimDayAdditional(e,t,r)},SchedulersClaimAllDay(e,t){return this.gp.schedulers.claimAllDay(e,t)},SchedulersClaimAllDays(e){return this.gp.schedulers.claimAllDays(e)},EventsJoin(e){return this.gp.events.join(this.getIdOrTag(e))},LoadFromJSON(e){try{var t=JSON.parse(e);if(!("isReady"in t))throw new Error("Data was corrupted");this.LoadFromJson(t)}catch(e){this._trigger(this.conditions.OnLoadJsonError)}}};